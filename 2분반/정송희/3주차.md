### <21 . ìë°”ìŠ¤í¬ë¦½íŠ¸- ë°°ì—´>

```jsx
var arr = [ 'A','B','C','D'];//ë°°ì—´ì„ arrë³€ìˆ˜ì— ëŒ€ì…
console.log(arr[1]); //B ì¶œë ¥
console.log(arr[3]); //D ì¶œë ¥

arr[3] = 3; // ë„¤ë²ˆì§¸ ë°°ì—´ ê°’ì„ 3ìœ¼ë¡œ ë°”ê¿ˆ)
console.log(arr); //ë°”ë€ ë°°ì—´ ì¶œë ¥
console.log(arr.length); // ë°°ì—´ì˜ í¬ê¸° ì¶œë ¥

arr.push('E'); // ë§ˆì§€ë§‰ì— ê°’ ì¶”ê°€í•¨
console.log(arr);//5ê°œì˜ ê°’ì„ ê°€ì§„ ë°°ì—´ ì¶œë ¥
```

### <22. ìë°”ìŠ¤í¬ë¦½íŠ¸ - ë°°ì—´ê³¼ ë°˜ë³µë¬¸>

```jsx
var number = [1,400,12,34,5];//ë°°ì—´ì„ ìƒì„±
var i =0; // ë³€ìˆ˜ ì´ˆê¸°í™”
while (i<5) { //iê°€ 5 ë ë•Œ ê¹Œì§€ 5ë²ˆ ë°˜ë³µ
  console.log(number[i]);//ë°°ì—´ ì²«ë²ˆì§¸ë¶€í„° ë‹¤ì„¯ë²ˆì§¸ ê¹Œì§€ ì¶œë ¥
  i=i+1;//iì˜ ê°’ 1 ì¦ê°€
}

i=0;
while (i<number.length) { //ë°°ì—´ì˜ í¬ê¸°ë§Œí¼ ë°˜ë³µ(ì¡°ê¸ˆë” ìœ ì—°í•˜ê²Œ ëŒ€ì‘ê°€ëŠ¥)
  console.log(number[i]);//ë°°ì—´ ì²«ë²ˆì§¸ë¶€í„° ë‹¤ì„¯ë²ˆì§¸ ê¹Œì§€ ì¶œë ¥
  i=i+1;//iì˜ ê°’ 1 ì¦ê°€
}

//ë°°ì—´ì— ìˆëŠ” ê°’ì„ ëª¨ë‘ ë”í•˜ëŠ” ë°˜ë³µë¬¸
var total = 0 ;
i=0;
while (i<number.length) { //ë°°ì—´ì˜ í¬ê¸°ë§Œí¼ ë°˜ë³µ(ì¡°ê¸ˆë” ìœ ì—°í•˜ê²Œ ëŒ€ì‘ê°€ëŠ¥)
  total=total+number[i]; //ë°˜ë³µí• ë•Œë§ˆë‹¤ í˜„ì¬ ê°’ì„ ë”í•¨
  i=i+1;//iì˜ ê°’ 1 ì¦ê°€
}
console.log(`total : ${total}`);//total ë³€ìˆ˜ì˜ ê°’ì„ ì¶œë ¥
```

### <23. Node.js - íŒŒì¼ ëª©ë¡ ì•Œì•„ë‚´ê¸°>

```jsx
var testFolder = './data'; //ë³€ìˆ˜ ì„ ì–¸í•˜ê³  ìš°ë¦¬ê°€ ì¡°ì‚¬í•  ë””ë ‰í„°ë¦¬ ê²½ë¡œ ì§€ì •
var fs = require('fs');//fs ëª¨ë“ˆ ì‚¬ìš©

fs.readdir(testFolder, function(error, filelist){
  // fsì— readdirê¸°ëŠ¥ì„ ì‹¤í–‰í•´ì„œ ì§€ì •í•œ ë””ì—‘í„°ë¦¬ì— ìˆëŠ” íŒŒì¼ ëª©ë¡ì„ filelistë³€ìˆ˜ì— ì €ì¥
  console.log(filelist); //readdirê¸°ëŠ¥ì€ ë°°ì—´ë¡œ ì¶œë ¥í•¨
});
```

<aside>
ğŸ’¡ fsëª¨ë“ˆì˜ readdirê¸°ëŠ¥: ë””ë ‰í„°ë¦¬ ëª©ë¡ì„ ì½ì–´ì˜´

</aside>

### <24. App - ê¸€ ëª©ë¡ ì¶œë ¥í•˜ê¸°>

1. data ë””ë ‰í„°ë¦¬ì—ì„œ íŒŒì¼ ëª©ë¡ ì½ì–´ì˜¤ê¸°
2. ì½ì–´ì˜¨ íŒŒì¼ ëª©ë¡ì„ í‘œì‹œí•˜ëŠ” HTML ì½”ë“œë¥¼ list ë³€ìˆ˜ì— ì €ì¥í•˜ê¸°
3. ì €ì¥í•œ ë³€ìˆ˜ë¥¼ ì´ìš©í•´ ì›¹ í˜ì´ì§€ì— í‘œì‹œí•˜ê¸°

```jsx
var http =require('http');
var fs = require('fs');
var url = require('url');//urlì´ë¼ëŠ” ëª¨ë“ˆì´ í•„ìš”í•˜ë‹¤ê³  ìš”êµ¬

var app = http.createServer(function(request,response) {
  var _url = request.url; //ì‚¬ìš©ìê°€ ìš”ì²­í•œ URL
  //console.log(_url);
  var queryData = url.parse(_url,true).query;//ì‚¬ìš©ìê°€ ìš”ì²­í•œ URLì—ì„œ ì¶”ì¶œí•œ ì¿¼ë¦¬ìŠ¤íŠ¸ë§ì„ querryDATAì— ëŒ€ì…
  var pathname = url.parse(_url,true).pathname;//pathnameì„ ì„ ì–¸í•˜ê³  ì‚¬ìš©ìê°€ ì…ë ¥í•œ URLì •ë³´ ì¤‘ ê²½ë¡œ ì´ë¦„ë§Œ ì¶”ì¶œí•´
  //console.log(queryData.id);//URLì¤‘ ì¿¼ë¦¬ ìŠ¤íŠ¸ë§ ë¬¸ìì—´ë§Œ ì¶”ì¶œí•˜ëŠ” ì½”ë“œ
  var title = queryData.id; // ìš”ì²­ë°›ì€ ì¿¼ë¦¬ìŠ¤íŠ¸ë§ ì¤‘ id ê°’ì„ title ë³€ìˆ˜ì— í• ë‹¹

  if(pathname === '/'){//í™ˆì¼ë•Œ
    if (queryData.id === undefined){
    fs.readdir('./data',function(error,filelist){
      var title = 'welcome';
      var description = 'Hello , Node.js';
    var list = '<ul>';
    var i =0;
    while ( i < filelist.length){
      list = list + `<li><a href="/?id=${filelist[i]}">${filelist[i]}</a></li>`;
      i=i+1;
    }
    list = list + '</ul>';
    var template = `
    <!doctype html>
    <html>
    <head>
      <title>WEB1 -${title}</title>
      <meta charset="utf-8">
    </head>
    <body>
      <h1><a href="/">WEB</a></h1>
      ${list}
      <h2>${title}</h2>
      <p>${description}  </p>
    </body>
    </html>
  `;
  response.writeHead(200);
  response.end(template);
});
  }
  else{//í™ˆì´ ì•„ë‹ë•Œ
    fs.readdir('./data',function(error,filelist){
    var list = '<ul>';
    var i =0;
    while ( i < filelist.length){
      list = list + `<li><a href="/?id=${filelist[i]}">${filelist[i]}</a></li>`;
      i=i+1;
    }
    list = list + '</ul>';
    fs.readFile(`data/${queryData.id}`,'utf8',function(err,description){
    var title = queryData.id;
    var template = `
    <!doctype html>
    <html>
    <head>
      <title>WEB1 -${title}</title>
      <meta charset="utf-8">
    </head>
    <body>
      <h1><a href="/">WEB</a></h1>
      ${list}
      <h2>${title}</h2>
      <p>${description}  </p>
    </body>
    </html>
  `;
  response.writeHead(200);
  response.end(template);
});
});
}
}else{
  response.writeHead(404);
  response.end('Not found');
}

  //console.log(url.parse(_url,true));//ì‚¬ìš©ìê°€ ì…ë ¥í•œ URLì •ë³´ë¥¼ ë¶„ì„í•´ì„œ ì‰½ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•¨.
  //if(_url == '/'){
    //title = 'welcome';
    //_url = '/index.html';
  //}
  //if(_url =='/favicon.ico'){
    //return response.writeHead(404);
  //}
  //response.writeHead(200);

  //console.log(__dirname + url); //ì›¹ ë¸Œë¼ìš°ì €ê°€ ìš”ì²­í•œ íŒŒì¼ì˜ ê²½ë¡œë¡œ ì½˜ì†”ì„ ì¶œë ¥
  //response.end(queryData.id); //ì›¹ì„œë²„ì˜ ì‘ë‹µì½”ë“œ(ê´„í˜¸ì•ˆì˜ ë‚´ìš©ì„ ì›¹ ë¸Œë¼ìš°ì €ì— ì „ë‹¬)
});
app.listen(3000);

```

â‡’ readdirë¡œ ì½ì–´ë“¤ì¸ íŒŒì¼ ëª©ë¡ë§Œí¼ ë°˜ë³µë¬¸ì„ ì´ìš©í•˜ì—¬  ì½ì–´ì˜¨ ëª©ë¡ì„ ulë¦¬ìŠ¤íŠ¸ë¥¼ ë§Œë“¤ì–´ ì €ì¥í•˜ê³ ì›¹ í˜ì´ì§€ì— <ul>ëª©ë¡ì´ ë§Œë“¤ì–´ì§€ë„ë¡ í•¨

### <25. ìë°”ìŠ¤í¬ë¦½íŠ¸ - í•¨ìˆ˜>

- í•¨ìˆ˜ì˜ ì…ë ¥

```jsx
function sum(first, second){
  console.log(first+second);
}

sum(2,4); //6ì¶œë ¥
```

ë§¤ê°œë³€ìˆ˜: í•¨ìˆ˜ì˜ ì…ë ¥ê°’ìœ¼ë¡œ ì „ë‹¬ë°›ëŠ” ë³€ìˆ˜

ì¸ì: 2ì™€ 4ì²˜ëŸ¼ ì „ë‹¬í•˜ëŠ” ê°’

- í•¨ìˆ˜ì˜ ì¶œë ¥

```jsx
function sum(first, second){
  return first+second;
}

console.log(sum(2,4)); //6ì¶œë ¥
```

â‡’ returnìœ¼ë¡œ ìì‹ ì„ í˜¸ì¶œí•œ ìª½ìœ¼ë¡œ ê°’ì„ ì „ë‹¬í•¨(returnì€ í•¨ìˆ˜ë¥¼ ì¢…ë£Œí•œë‹¤ëŠ” ì˜ë¯¸ì™€ ì–´ë–¤ ê°’ì„ ë°˜í™˜í•œë‹¤ëŠ” ë‘ê°€ì§€ ì˜ë¯¸ê°€ ìˆìŒ)

### <26. App - í•¨ìˆ˜ë¥¼ ì´ìš©í•´ ì½”ë“œ ì •ë¦¬í•˜ê¸°>

```jsx
var http =require('http');
var fs = require('fs');
var url = require('url');//urlì´ë¼ëŠ” ëª¨ë“ˆì´ í•„ìš”í•˜ë‹¤ê³  ìš”êµ¬

function templateHTML(title, list, body){
  return `
  <!doctype html>
  <html>
  <head>
    <title>WEB1 -${title}</title>
    <meta charset="utf-8">
  </head>
  <body>
    <h1><a href="/">WEB</a></h1>
    ${list}
    ${body}
  </body>
  </html>
`;
}

function templateList(filelist){
  var list = '<ul>';
  var i =0;
  while ( i < filelist.length){
    list = list + `<li><a href="/?id=${filelist[i]}">${filelist[i]}</a></li>`;
    i=i+1;
  }
  list = list + '</ul>';
  return list;
}
var app = http.createServer(function(request,response) {
  var _url = request.url; //ì‚¬ìš©ìê°€ ìš”ì²­í•œ URL
  var queryData = url.parse(_url,true).query;//ì‚¬ìš©ìê°€ ìš”ì²­í•œ URLì—ì„œ ì¶”ì¶œí•œ ì¿¼ë¦¬ìŠ¤íŠ¸ë§ì„ querryDATAì— ëŒ€ì…
  var pathname = url.parse(_url,true).pathname;//pathnameì„ ì„ ì–¸í•˜ê³  ì‚¬ìš©ìê°€ ì…ë ¥í•œ URLì •ë³´ ì¤‘ ê²½ë¡œ ì´ë¦„ë§Œ ì¶”ì¶œí•´

  if(pathname === '/'){//í™ˆì¼ë•Œ
    if (queryData.id === undefined){
    fs.readdir('./data',function(error,filelist){
      var title = 'welcome';
      var description = 'Hello , Node.js';
    var list = templateList(filelist);
    var template = templateHTML(title,list,`<h2>${title}</h2><p>${description}</p>`);

  response.writeHead(200);
  response.end(template);
});
  }
  else{//í™ˆì´ ì•„ë‹ë•Œ
    fs.readdir('./data',function(error,filelist){
    fs.readFile(`data/${queryData.id}`,'utf8',function(err,description){
    var title = queryData.id;
    var list = templateList(filelist);
    var template = templateHTML(title,list,`<h2>${title}</h2><p>${description}</p>`);

  response.writeHead(200);
  response.end(template);
});
});
}
}else{
  response.writeHead(404);
  response.end('Not found');
}
});
app.listen(3000);

```

â‡’ templateListë‘ templateHTMLí•¨ìˆ˜ë¥¼ ì •ì˜í•´ì„œ ë°˜ë³µë˜ëŠ” ì½”ë“œë¥¼ ì¤„ì„

### <28. Node.js - ë™ê¸°ì™€ ë¹„ë™ê¸° ê·¸ë¦¬ê³  ì½œë°±>

- ë™ê¸° ì²˜ë¦¬ ë°©ì‹(synchronous)
    
    â†’ í•˜ë‚˜ì˜ ì‘ì—…ì´ ëë‚  ë•Œê¹Œì§€ ê¸°ë‹¤ë ¸ë‹¤ê°€ ë‹¤ìŒ ì‘ì—…ì„ ì²˜ë¦¬í•˜ëŠ” ë°©ì‹
    
    ```jsx
    var fs = require('fs'); //fs ëª¨ë“ˆì‚¬ìš©
    
    //readfileSyncë™ê¸°ì²˜ë¦¬ë°©ì‹
    console.log('A');
    var result = fs.readFileSync('syntax/sample.txt','utf8'); //txtì½ì–´ì„œ resultë³€ìˆ˜ì— ë‹´ìŒ
    console.log(result);
    console.log('c');
    ```
    
    â‡’ ëª…ë ¹ì„ ì‘ì„±í•œ ìˆœì„œëŒ€ë¡œ ì¶œë ¥ë¨ (A B Cë¡œ ì¶œë ¥ë¨)
    
- ë¹„ë™ê¸° ì²˜ë¦¬ ë°©ì‹(asynchronous)
    
    â†’ ë³‘ë ¬ë¡œ ë™ì‹œì— ì—¬ëŸ¬ ê°€ì§€ ì¼ì„ ì²˜ë¦¬í•˜ëŠ” ë°©ì‹
    
    ```jsx
    console.log('A');
    fs.readFile('syntax/sample.txt','utf8',function(err,result){
      console.log(result);
    });
    console.log('C');
    ```
    
    â‡’ readFileì„ ì‹¤í–‰í•˜ê³  ì²˜ë¦¬ë¥¼ ì™„ë£Œí•˜ê¸° ì „ì— ë‹¤ìŒëª…ë ¹ì„ ì‹¤í–‰í•´  â€˜Câ€™ê°€ ì¶œë ¥ë¨.(ACBë¡œ ì¶œë ¥ë¨)
    
    íŒŒì¼ì½ê¸°ë¥¼ ë§ˆì¹˜ë©´ ì„¸ë²ˆì§¸ ë§¤ê°œë³€ìˆ˜ë¡œ ì „ë‹¬í•œ í•¨ìˆ˜ë¥¼ ìë™ìœ¼ë¡œ í˜¸ì¶œí•´ì„œ í•¨ìˆ˜ì˜ ë³¸ë¬¸ì„ ì‹¤í–‰í•¨
    
- ì½œë°±(callback)
    
    â†’ ì–´ë–¤ ì‹¤í–‰ë¬¸ì„ ë§ˆì¹˜ë©´ ë‚´ë¶€ì ìœ¼ë¡œ ìë™ í˜¸ì¶œí•˜ëŠ” ê¸°ëŠ¥
    
    (ì„¸ë²ˆì§¸ ì¸ìˆ˜ë¡œ ì½œë°±ì„ ì „ë‹¬í•¨ìœ¼ë¡œì¨ readFile í•¨ìˆ˜ê°€ ì‹¤í–‰ì„ ë§ˆì¹˜ë©´ ê·¸ ë‹¤ìŒì— functionìœ¼ë¡œ ì •ì˜í•œ í•¨ìˆ˜ê°€ í˜¸ì¶œë¨)
    
    ```jsx
    var a =function {
      console.log('A');
    }
    
    function slowfunc(callback){
      callback();
    }
    slowfunc(a);
    ```
    
    â‡’ slowfunc()í•¨ìˆ˜ëŠ” ì½œë°±ì„ ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ì•„ì„œ í˜¸ì¶œí•¨. slowfunc í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ë•Œ slowfuncí•¨ìˆ˜ê°€ ì‹¤í–‰ëœ ë‹¤ìŒì— í˜¸ì¶œí•  í•¨ìˆ˜ë¥¼ ì¸ìˆ˜ë¡œ ì „ë‹¬í•´ì•¼í•¨. (aë¡œ ì „ë‹¬) aë³€ìˆ˜ì— ë‹´ê¸´ í•¨ìˆ˜ê°€ slowfuncí•¨ìˆ˜ì˜ ë§¤ê°œë³€ìˆ˜ì¸ ì½œë°±ì— ì „ë‹¬ë˜ê³  slowfunc í•¨ìˆ˜ê°€ ì²˜ë¦¬ë¥¼ ë§ˆì¹˜ë©´ ê³§ë°”ë¡œ aë³€ìˆ˜ì— ë‹´ê¸´ í•¨ìˆ˜ê°€ ì‹¤í–‰ëœë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•¨
    

### <29. Node.js - íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €ì™€ PM2>

- íŒ¨í‚¤ì§€: ì†Œí”„íŠ¸ì›¨ì–´ë¥¼ ì¼ì»«ëŠ” ì—¬ëŸ¬ ê°€ì§€ í‘œí˜„ ì¤‘ í•˜ë‚˜ì„. ë…ë¦½ì ìœ¼ë¡œ ì‹¤í–‰ë˜ëŠ” í”„ë¡œê·¸ë¨ë„ íŒ¨í‚¤ì§€, ì–´ë–¤ í”„ë¡œê·¸ë¨ ì•ˆì—ì„œ ë¶€í’ˆìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ì‘ì€ í”„ë¡œê·¸ë¨ë„ íŒ¨í‚¤ì§€ë¼ê³  í•  ìˆ˜ ìˆìŒ.
- íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €: íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜, ì—…ë°ì´íŠ¸, ì‚­ì œí•˜ëŠ” ë“± ê´€ë¦¬í•˜ëŠ” ë° ë„ì›€ì„ ì£¼ëŠ” í”„ë¡œê·¸ë¨ì„.
    - íŒ¨í‚¤ì§€ ë§¤ë‹ˆì € npm â†’ Node.jsë¥¼ ì„¤ì¹˜í•  ë•Œ í•¨ê»˜ ì„¤ì¹˜ë˜ëŠ” ê¸°ë³¸ íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €ì„(npmì„ í†µí•´ PM2ì„¤ì¹˜)
- PM2: Node.jsë¡œ ë§Œë“  í”„ë¡œì„¸ìŠ¤ë¥¼ ê´€ë¦¬í•´ì£¼ëŠ” í”„ë¡œê·¸ë¨ìœ¼ë¡œ í”„ë¡œê·¸ë¨ì„ ê°ì‹œí•˜ê³  ìˆë‹¤ê°€ ì˜ë„í•˜ì§€ ì•Šê²Œ êº¼ì§€ê±°ë‚˜ ì†ŒìŠ¤ê°€ ë³€ê²½ë  ë•Œ ìë™ìœ¼ë¡œ ì¬ì‹œë™í•¨ìœ¼ë¡œì¨ ì„œë¹„ìŠ¤ë¥¼ ì•ˆì •ì ìœ¼ë¡œ ìœ ì§€í•˜ê²Œ ë„ì›€.
    - í”„ë¡œì„¸ìŠ¤: ë™ì‘ ì¤‘ì¸ í”„ë¡œê·¸ë¨ì´ë¼ëŠ” ì˜ë¯¸ â† main.js
- PM2 ì‹¤í–‰
    
    pm2 start main.js
    
    â‡’main.jsë¥¼ ì‹¤í–‰í•¨
    
- í”„ë¡œì„¸ìŠ¤ ê°ì‹œ
    
    pm2 monit (ëŒ ë•ŒëŠ” Qí‚¤ ëˆ„ë¦„)
    
    â‡’ ì‘ì—…ê´€ë¦¬ìì—ì„œ í”„ë¡œì„¸ìŠ¤ë¥¼ ê°•ì œ ì¢…ë£Œì‹œì¼œë„ ë‹¤ì‹œ ì‹¤í–‰ëœ ê±¸ í™•ì¸ê°€ëŠ¥í•¨. PM2ê°€ ìë™ìœ¼ë¡œ ì¬ì‹œë™í•œ ê²ƒì„.
    
- í”„ë¡œì„¸ìŠ¤ ëª©ë¡ í™•ì¸ê³¼ ì¤‘ë‹¨
    
    pm2 list
    
    â‡’í˜„ì¬ ì‹¤í–‰ ì¤‘ì¸ í”„ë¡œì„¸ìŠ¤ ëª©ë¡ì„ í™•ì¸í•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©(ìƒíƒœê°€ onlineìœ¼ë¡œ ë°”ë€œ)
    
    pm2 stop main.js
    
    â‡’ ì¤‘ë‹¨í•˜ê³  ì‹¶ì€ í”„ë¡œì„¸ìŠ¤ ì¤‘ë‹¨(ìƒíƒœê°€ stoppedë¡œ ë°”ë€œ)
    
- ì†ŒìŠ¤ íŒŒì¼ ê°ì‹œ
    
    pm2 start main.js â€”watch
    
    â‡’ ì†ŒìŠ¤ë¥¼ ê³ ì¹˜ê³  í”„ë¡œê·¸ë¨ì„ ì¬ì‹œë™í–ˆë˜ ë°©ì‹ì„ ìë™í™”í•¨. (ë³€ê²½ëœ ì½”ë“œê°€ ì¦‰ì‹œ ë°˜ì˜)
    
    pm2 log
    
    â‡’ ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ í™•ì¸í•˜ëŠ”ë° ë„ì›€ì„ ì¤Œ
    

### <30. HTML - Form>

- Form(í¼): ì½˜í…ì¸  ìƒì„±ì„ ë°ì´í„° ë””ë ‰í„°ë¦¬ì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ì†Œìœ ìë§Œ í•  ìˆ˜ ìˆì—ˆìŒ. ì™¸ë¶€ì—ì„œ ëˆ„êµ¬ë‚˜ ë°ì´í„°ë¥¼ ì „ì†¡í•¨ìœ¼ë¡œì¨ ì½˜í…ì¸ ë¥¼ ìƒì„±, ìˆ˜ì •, ì‚­ì œí•  ìˆ˜ ìˆê²Œ í•˜ë ¤ê³  í•¨. â†’ ì‚¬ìš©ìê°€ ì„œë²„ìª½ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì „ì†¡í•˜ëŠ” ë°©ì‹

```jsx
<form action="http://localhost:3000/process_create">
//actionì†ì„±ì— ë°ì´í„°ë¥¼ ì „ì†¡í•  ì£¼ì†Œë¥¼ ì…ë ¥
  <p><input type='text' name = "title"></p>
  //ì…ë ¥ë°›ì€ ê±¸ í…ìŠ¤íŠ¸ íƒ€ì…ìœ¼ë¡œ ì§€ì •í•¨
  //ì›¹ ì„œë²„ê°€ ìˆ˜ì‹ í•´ì„œ ìš©ë„ì— ë§ê²Œ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ ê° ë°ì´í„°ì— ì´ë¦„ì„ ë¶€ì—¬í•¨
  <p>//ì—¬ëŸ¬ì¤„ ì…ë ¥ê°€ëŠ¥
    <textarea name="description"></textarea>
  </p>
  <p>//ì…ë ¥ì´ ëë‚¬ë‹¤ëŠ” ì˜ë¯¸ ì „ì†¡(ì›¹ì„œë²„ë¡œ ë°ì´í„°ê°€ ì „ì†¡ë¨)
    <input type="submit">
  </p>
</form>
```

â‡’ì‹¤í–‰í•˜ë©´ [http://localhost:3000/process_create?title=ã„´ã„´&description=ã…](http://localhost:3000/process_create?title=%E3%84%B4%E3%84%B4&description=%E3%85%81) ì£¼ì†Œê°€ ë°”ë€œ

? ì•ì€ ë°ì´í„°ë¥¼ ì „ë‹¬í•œ ì›¹ ì„œë²„ ì£¼ì†Œ, ë’¤ëŠ” ì¿¼ë¦¬ìŠ¤íŠ¸ë§

<form>ì•ˆì— method=â€postâ€ ì§€ì •í•´ì£¼ë©´ ì£¼ì†Œí‘œì‹œì¤„ì— í‘œì‹œë˜ì§€ ì•Šì•„ ì•ˆì „í•˜ê²Œ ì „ì†¡ê°€ëŠ¥í•˜ê³  ì•„ì£¼ í° ë°ì´í„°ë„ ì „ë‹¬ ê°€ëŠ¥(â† ì„œë²„ì—ì„œ ë°ì´í„°ë¥¼ ì „ì†¡í•  ë•Œ)

method = â€œgetâ€ìœ¼ë¡œ ì§€ì •í•˜ë©´ ì¿¼ë¦¬ìŠ¤íŠ¸ë§ì´ í‘œì‹œë˜ê³  ë°ì´í„°ì˜ ì–‘ì´ ì œí•œì ì¼ ìˆ˜ ìˆìŒ (â† ì„œë²„ì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ ë•Œ ì‚¬ìš©)

### <31. App- ê¸€ ìƒì„± UI ë§Œë“¤ê¸°>

```jsx
var http =require('http');
var fs = require('fs');
var url = require('url');//urlì´ë¼ëŠ” ëª¨ë“ˆì´ í•„ìš”í•˜ë‹¤ê³  ìš”êµ¬

function templateHTML(title, list, body){
  return `
  <!doctype html>
  <html>
  <head>
    <title>WEB1 -${title}</title>
    <meta charset="utf-8">
  </head>
  <body>
    <h1><a href="/">WEB2</a></h1>
    ${list}
    <a href="/create">create</a>
    ${body}
  </body>
  </html>
`;
}

function templateList(filelist){
  var list = '<ul>';
  var i =0;
  while ( i < filelist.length){
    list = list + `<li><a href="/?id=${filelist[i]}">${filelist[i]}</a></li>`;
    i=i+1;
  }
  list = list + '</ul>';
  return list;
}
var app = http.createServer(function(request,response) {
  var _url = request.url; //ì‚¬ìš©ìê°€ ìš”ì²­í•œ URL
  var queryData = url.parse(_url,true).query;//ì‚¬ìš©ìê°€ ìš”ì²­í•œ URLì—ì„œ ì¶”ì¶œí•œ ì¿¼ë¦¬ìŠ¤íŠ¸ë§ì„ querryDATAì— ëŒ€ì…
  var pathname = url.parse(_url,true).pathname;//pathnameì„ ì„ ì–¸í•˜ê³  ì‚¬ìš©ìê°€ ì…ë ¥í•œ URLì •ë³´ ì¤‘ ê²½ë¡œ ì´ë¦„ë§Œ ì¶”ì¶œí•´

  if(pathname === '/'){//í™ˆì¼ë•Œ
    if (queryData.id === undefined){
    fs.readdir('./data',function(error,filelist){
      var title = 'welcome';
      var description = 'Hello , Node.js';
    var list = templateList(filelist);
    var template = templateHTML(title,list,`<h2>${title}</h2><p>${description}</p>`);

  response.writeHead(200);
  response.end(template);
});
}}
  else if(pathname ==='/create'){
    fs.readdir('./data',function(error,filelist){
      var title = 'welcome';
    var list = templateList(filelist);
    var template = templateHTML(title,list,`
      <form action="http://localhost:3000/create_process">
      <p><input type='text' name = "title" placeholder="title"></p>
      <p>
        <textarea name="description" placeholder="description"></textarea>
      </p>
      <p>
        <input type="submit">
      </p>
    </form>`);
    response.writeHead(200);
    response.end(template);
  });
}
  /*else{//í™ˆì´ ì•„ë‹ë•Œ
    fs.readdir('./data',function(error,filelist){
    fs.readFile(`data/${queryData.id}`,'utf8',function(err,description){
    var title = queryData.id;
    var list = templateList(filelist);
    var template = templateHTML(title,list,`<h2>${title}</h2><p>${description}</p>`);

  response.writeHead(200);
  response.end(template);
});
});
}
}
*/else{
  response.writeHead(404);
  response.end('Not found');
}
});
app.listen(3000);

```

â‡’ ì‚¬ìš©ìì˜ ì…ë ¥ì„ í†µí•´ ë°ì´í„°ë¥¼ ì›¹ì„œë²„ë¡œ ë³´ë‚´ëŠ” UIë¥¼ ë§Œë“¬

### <32. App - POST ë°©ì‹ìœ¼ë¡œ ì „ì†¡ëœ ë°ì´í„° ë°›ê¸°>

```jsx
var http =require('http');
var fs = require('fs');
var url = require('url');//urlì´ë¼ëŠ” ëª¨ë“ˆì´ í•„ìš”í•˜ë‹¤ê³  ìš”êµ¬
var qs =require('querystring');

function templateHTML(title, list, body){
  return `
  <!doctype html>
  <html>
  <head>
    <title>WEB1 -${title}</title>
    <meta charset="utf-8">
  </head>
  <body>
    <h1><a href="/">WEB2</a></h1>
    ${list}
    <a href="/create">create</a>
    ${body}
  </body>
  </html>
`;
}

function templateList(filelist){
  var list = '<ul>';
  var i =0;
  while ( i < filelist.length){
    list = list + `<li><a href="/?id=${filelist[i]}">${filelist[i]}</a></li>`;
    i=i+1;
  }
  list = list + '</ul>';
  return list;
}
var app = http.createServer(function(request,response) {
  //requestì—ëŠ” ìš”ì²­í• ë•Œ ì›¹ ë¸Œë¼ìš°ì €ê°€ ë³´ë‚¸ ì •ë³´
  //responseì—ëŠ” ì‘ë‹µí• ë•Œ ì›¹ ë¸Œë¼ìš°ì €ì— ì „ì†¡í•  ì •ë³´
  var _url = request.url; //ì‚¬ìš©ìê°€ ìš”ì²­í•œ URL
  var queryData = url.parse(_url,true).query;//ì‚¬ìš©ìê°€ ìš”ì²­í•œ URLì—ì„œ ì¶”ì¶œí•œ ì¿¼ë¦¬ìŠ¤íŠ¸ë§ì„ querryDATAì— ëŒ€ì…
  var pathname = url.parse(_url,true).pathname;//pathnameì„ ì„ ì–¸í•˜ê³  ì‚¬ìš©ìê°€ ì…ë ¥í•œ URLì •ë³´ ì¤‘ ê²½ë¡œ ì´ë¦„ë§Œ ì¶”ì¶œí•´

  if(pathname === '/'){//í™ˆì¼ë•Œ
    if (queryData.id === undefined){
    fs.readdir('./data',function(error,filelist){
      var title = 'welcome';
      var description = 'Hello , Node.js';
    var list = templateList(filelist);
    var template = templateHTML(title,list,`<h2>${title}</h2><p>${description}</p>`);

  response.writeHead(200);
  response.end(template);
});
}}
else if(pathname ==='/create'){
   fs.readdir('./data',function(error,filelist){
     var title = 'welcome';
   var list = templateList(filelist);
   var template = templateHTML(title,list,`
     <form action="http://localhost:3000/create_process" method="post">
     <p><input type='text' name = "title" placeholder="title"></p>
     <p>
       <textarea name="description" placeholder="description"></textarea>
     </p>
     <p>
       <input type="submit">
     </p>
   </form>`);
   response.writeHead(200);
   response.end(template);
 });
}
  else if(pathname ==='/create_process'){
    var body ='';
    request.on('data',function(data){//ì½œë°±ì— ë°ì´í„° ì²˜ë¦¬ê¸°ëŠ¥ ì •ì˜
      //ì¡°ê°ì¡°ê°ë‚˜ëˆ ì„œ ë°ì´í„°ë¥¼ ìˆ˜ì‹ í•  ë•Œë§ˆë‹¤ í˜¸ì¶œë˜ëŠ” ì½œë°±í•¨ìˆ˜
      //ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ëŠ” ê¸°ëŠ¥ì„ ì •ì˜
      body= body+data;

    });
    request.on('end',function(){//ì½œë°±ì— ë°ì´í„° ì²˜ë¦¬ë¥¼ ë§ˆë¬´ë¦¬í•˜ëŠ” ê¸°ëŠ¥ ì •ì˜
      var post = qs.parse(body);
      console.log(JSON.stringify(post));
    });
    response.writeHead(200);
    response.end();

}
else{
  response.writeHead(404);
  response.end('Not found');
}
});
app.listen(3000);

```

### <33. App- íŒŒì¼ ìƒì„±ê³¼ ë¦¬ë‹¤ì´ë ‰ì…˜>

```jsx
var http =require('http');
var fs = require('fs');
var url = require('url');//urlì´ë¼ëŠ” ëª¨ë“ˆì´ í•„ìš”í•˜ë‹¤ê³  ìš”êµ¬
var qs =require('querystring');

function templateHTML(title, list, body){
  return `
  <!doctype html>
  <html>
  <head>
    <title>WEB1 -${title}</title>
    <meta charset="utf-8">
  </head>
  <body>
    <h1><a href="/">WEB</a></h1>
    ${list}
    <a href="/create">create</a>
    ${body}
  </body>
  </html>
`;
}

function templateList(filelist){
  var list = '<ul>';
  var i =0;
  while ( i < filelist.length){
    list = list + `<li><a href="/?id=${filelist[i]}">${filelist[i]}</a></li>`;
    i=i+1;
  }
  list = list + '</ul>';
  return list;
}
var app = http.createServer(function(request,response) {
  //requestì—ëŠ” ìš”ì²­í• ë•Œ ì›¹ ë¸Œë¼ìš°ì €ê°€ ë³´ë‚¸ ì •ë³´
  //responseì—ëŠ” ì‘ë‹µí• ë•Œ ì›¹ ë¸Œë¼ìš°ì €ì— ì „ì†¡í•  ì •ë³´
  var _url = request.url; //ì‚¬ìš©ìê°€ ìš”ì²­í•œ URL
  var queryData = url.parse(_url,true).query;//ì‚¬ìš©ìê°€ ìš”ì²­í•œ URLì—ì„œ ì¶”ì¶œí•œ ì¿¼ë¦¬ìŠ¤íŠ¸ë§ì„ querryDATAì— ëŒ€ì…
  var pathname = url.parse(_url,true).pathname;//pathnameì„ ì„ ì–¸í•˜ê³  ì‚¬ìš©ìê°€ ì…ë ¥í•œ URLì •ë³´ ì¤‘ ê²½ë¡œ ì´ë¦„ë§Œ ì¶”ì¶œí•´

  if(pathname === '/'){//í™ˆì¼ë•Œ
    if (queryData.id === undefined){
    fs.readdir('./data',function(error,filelist){
      var title = 'welcome';
      var description = 'Hello , Node.js';
    var list = templateList(filelist);
    var template = templateHTML(title,list,`<h2>${title}</h2>${description}`);

  response.writeHead(200);
  response.end(template);
});
}else{
  fs.readdir('./data', function(error, filelist){
          fs.readFile(`data/${queryData.id}`, 'utf8', function(err, description){
            var title = queryData.id;
            var list = templateList(filelist);
            var template = templateHTML(title, list, `<h2>${title}</h2>${description}`);
            response.writeHead(200);
            response.end(template);
          });
        });
}}
else if(pathname ==='/create'){
   fs.readdir('./data',function(error,filelist){
     var title = 'welcome';
   var list = templateList(filelist);
   var template = templateHTML(title,list,`
     <form action="http://localhost:3000/create_process" method="post">
     <p><input type='text' name = "title" placeholder="title"></p>
     <p>
       <textarea name="description" placeholder="description"></textarea>
     </p>
     <p>
       <input type="submit">
     </p>
   </form>`);
   response.writeHead(200);
   response.end(template);
 });
}
else if (pathname === '/create_process') {
var body = '';
request.on('data', function(data) {
  body += data;
});
request.on('end', function() {
  var post = qs.parse(body);
  var title = post.title;
  var description = post.description;

  fs.writeFile(`data/${title}`, description, 'utf8', function(err) {
    response.writeHead(302,{Location:`/?id=${title}`});
    response.end();
  })
});
}

else{
  response.writeHead(404);
  response.end('Not found');
}
});
app.listen(3000);

```

### <34. App - ê¸€ ìˆ˜ì •(ìˆ˜ì •ë§í¬ìƒì„±)

```jsx
var http = require('http');
var fs = require('fs');
var url = require('url');
var qs = require('querystring');

function templateHTML(title, list, body, control){
  return `
  <!doctype html>
  <html>
  <head>
    <title>WEB1 - ${title}</title>
    <meta charset="utf-8">
  </head>
  <body>
    <h1><a href="/">WEB</a></h1>
    ${list}
    ${control}
    ${body}
  </body>
  </html>
  `;
}
function templateList(filelist){
  var list = '<ul>';
  var i = 0;
  while(i < filelist.length){
    list = list + `<li><a href="/?id=${filelist[i]}">${filelist[i]}</a></li>`;
    i = i + 1;
  }
  list = list+'</ul>';
  return list;
}

var app = http.createServer(function(request,response){
    var _url = request.url;
    var queryData = url.parse(_url, true).query;
    var pathname = url.parse(_url, true).pathname;
    if(pathname === '/'){
      if(queryData.id === undefined){
        fs.readdir('./data', function(error, filelist){
          var title = 'Welcome';
          var description = 'Hello, Node.js';
          var list = templateList(filelist);
          var template = templateHTML(title, list,
            `<h2>${title}</h2>${description}`,
            `<a href="/create">create</a>`
          );
          response.writeHead(200);
          response.end(template);
        });
      } else {
        fs.readdir('./data', function(error, filelist){
          fs.readFile(`data/${queryData.id}`, 'utf8', function(err, description){
            var title = queryData.id;
            var list = templateList(filelist);
            var template = templateHTML(title, list,
              `<h2>${title}</h2>${description}`,
              `<a href="/create">create</a> <a href="/update?id=${title}">update</a>`
            );
            response.writeHead(200);
            response.end(template);
          });
        });
      }
    } else if(pathname === '/create'){
      fs.readdir('./data', function(error, filelist){
        var title = 'WEB - create';
        var list = templateList(filelist);
        var template = templateHTML(title, list, `
          <form action="http://localhost:3000/create_process" method="post">
            <p><input type="text" name="title" placeholder="title"></p>
            <p>
              <textarea name="description" placeholder="description"></textarea>
            </p>
            <p>
              <input type="submit">
            </p>
          </form>
        `, '');
        response.writeHead(200);
        response.end(template);
      });
    } else if(pathname === '/create_process'){
      var body = '';
      request.on('data', function(data){
          body = body + data;
      });
      request.on('end', function(){
          var post = qs.parse(body);
          var title = post.title;
          var description = post.description;
          fs.writeFile(`data/${title}`, description, 'utf8', function(err){
            response.writeHead(302, {Location: `/?id=${title}`});
            response.end();
          })
      });
    } else {
      response.writeHead(404);
      response.end('Not found');
    }
});
app.listen(3000);

```

### <35. App- ê¸€ìˆ˜ì •(ìˆ˜ì •í•  ì •ë³´ ì „ì†¡)

```jsx
var http = require('http');
var fs = require('fs');
var url = require('url');
var qs = require('querystring');
 
function templateHTML(title, list, body, control){
  return `
  <!doctype html>
  <html>
  <head>
    <title>WEB1 - ${title}</title>
    <meta charset="utf-8">
  </head>
  <body>
    <h1><a href="/">WEB</a></h1>
    ${list}
    ${control}
    ${body}
  </body>
  </html>
  `;
}
function templateList(filelist){
  var list = '<ul>';
  var i = 0;
  while(i < filelist.length){
    list = list + `<li><a href="/?id=${filelist[i]}">${filelist[i]}</a></li>`;
    i = i + 1;
  }
  list = list+'</ul>';
  return list;
}
 
var app = http.createServer(function(request,response){
    var _url = request.url;
    var queryData = url.parse(_url, true).query;
    var pathname = url.parse(_url, true).pathname;
    if(pathname === '/'){
      if(queryData.id === undefined){
        fs.readdir('./data', function(error, filelist){
          var title = 'Welcome';
          var description = 'Hello, Node.js';
          var list = templateList(filelist);
          var template = templateHTML(title, list,
            `<h2>${title}</h2>${description}`,
            `<a href="/create">create</a>`
          );
          response.writeHead(200);
          response.end(template);
        });
      } else {
        fs.readdir('./data', function(error, filelist){
          fs.readFile(`data/${queryData.id}`, 'utf8', function(err, description){
            var title = queryData.id;
            var list = templateList(filelist);
            var template = templateHTML(title, list,
              `<h2>${title}</h2>${description}`,
              `<a href="/create">create</a> <a href="/update?id=${title}">update</a>`
            );
            response.writeHead(200);
            response.end(template);
          });
        });
      }
    } else if(pathname === '/create'){
      fs.readdir('./data', function(error, filelist){
        var title = 'WEB - create';
        var list = templateList(filelist);
        var template = templateHTML(title, list, `
          <form action="/create_process" method="post">
            <p><input type="text" name="title" placeholder="title"></p>
            <p>
              <textarea name="description" placeholder="description"></textarea>
            </p>
            <p>
              <input type="submit">
            </p>
          </form>
        `, '');
        response.writeHead(200);
        response.end(template);
      });
    } else if(pathname === '/create_process'){
      var body = '';
      request.on('data', function(data){
          body = body + data;
      });
      request.on('end', function(){
          var post = qs.parse(body);
          var title = post.title;
          var description = post.description;
          fs.writeFile(`data/${title}`, description, 'utf8', function(err){
            response.writeHead(302, {Location: `/?id=${title}`});
            response.end();
          })
      });
    } else if(pathname === '/update'){
      fs.readdir('./data', function(error, filelist){
        fs.readFile(`data/${queryData.id}`, 'utf8', function(err, description){
          var title = queryData.id;
          var list = templateList(filelist);
          var template = templateHTML(title, list,
            `
            <form action="/update_process" method="post">
              <input type="hidden" name="id" value="${title}">
              <p><input type="text" name="title" placeholder="title" value="${title}"></p>
              <p>
                <textarea name="description" placeholder="description">${description}</textarea>
              </p>
              <p>
                <input type="submit">
              </p>
            </form>
            `,
            `<a href="/create">create</a> <a href="/update?id=${title}">update</a>`
          );
          response.writeHead(200);
          response.end(template);
        });
      });
    } else {
      response.writeHead(404);
      response.end('Not found');
    }
});
app.listen(3000);
```

### <36. App-ê¸€ ìˆ˜ì •(ìˆ˜ì •ëœ ë‚´ìš© ì €ì¥)>

```jsx
var http = require('http');
var fs = require('fs');
var url = require('url');
var qs = require('querystring');

function templateHTML(title, list, body, control){
  return `
  <!doctype html>
  <html>
  <head>
    <title>WEB1 - ${title}</title>
    <meta charset="utf-8">
  </head>
  <body>
    <h1><a href="/">WEB</a></h1>
    ${list}
    ${control}
    ${body}
  </body>
  </html>
  `;
}
function templateList(filelist){
  var list = '<ul>';
  var i = 0;
  while(i < filelist.length){
    list = list + `<li><a href="/?id=${filelist[i]}">${filelist[i]}</a></li>`;
    i = i + 1;
  }
  list = list+'</ul>';
  return list;
}

var app = http.createServer(function(request,response){
    var _url = request.url;
    var queryData = url.parse(_url, true).query;
    var pathname = url.parse(_url, true).pathname;
    if(pathname === '/'){
      if(queryData.id === undefined){
        fs.readdir('./data', function(error, filelist){
          var title = 'Welcome';
          var description = 'Hello, Node.js';
          var list = templateList(filelist);
          var template = templateHTML(title, list,
            `<h2>${title}</h2>${description}`,
            `<a href="/create">create</a>`
          );
          response.writeHead(200);
          response.end(template);
        });
      } else {
        fs.readdir('./data', function(error, filelist){
          fs.readFile(`data/${queryData.id}`, 'utf8', function(err, description){
            var title = queryData.id;
            var list = templateList(filelist);
            var template = templateHTML(title, list,
              `<h2>${title}</h2>${description}`,
              `<a href="/create">create</a> <a href="/update?id=${title}">update</a>`
            );
            response.writeHead(200);
            response.end(template);
          });
        });
      }
    } else if(pathname === '/create'){
      fs.readdir('./data', function(error, filelist){
        var title = 'WEB - create';
        var list = templateList(filelist);
        var template = templateHTML(title, list, `
          <form action="/create_process" method="post">
            <p><input type="text" name="title" placeholder="title"></p>
            <p>
              <textarea name="description" placeholder="description"></textarea>
            </p>
            <p>
              <input type="submit">
            </p>
          </form>
        `, '');
        response.writeHead(200);
        response.end(template);
      });
    } else if(pathname === '/create_process'){
      var body = '';
      request.on('data', function(data){
          body = body + data;
      });
      request.on('end', function(){
          var post = qs.parse(body);
          var title = post.title;
          var description = post.description;
          fs.writeFile(`data/${title}`, description, 'utf8', function(err){
            response.writeHead(302, {Location: `/?id=${title}`});
            response.end();
          })
      });
    } else if(pathname === '/update'){
      fs.readdir('./data', function(error, filelist){
        fs.readFile(`data/${queryData.id}`, 'utf8', function(err, description){
          var title = queryData.id;
          var list = templateList(filelist);
          var template = templateHTML(title, list,
            `
            <form action="/update_process" method="post">
              <input type="hidden" name="id" value="${title}">
              <p><input type="text" name="title" placeholder="title" value="${title}"></p>
              <p>
                <textarea name="description" placeholder="description">${description}</textarea>
              </p>
              <p>
                <input type="submit">
              </p>
            </form>
            `,
            `<a href="/create">create</a> <a href="/update?id=${title}">update</a>`
          );
          response.writeHead(200);
          response.end(template);
        });
      });
    } else if(pathname === '/update_process'){
      var body = '';
      request.on('data', function(data){
          body = body + data;
      });
      request.on('end', function(){
          var post = qs.parse(body);
          var id = post.id;
          var title = post.title;
          var description = post.description;
          fs.rename(`data/${id}`, `data/${title}`, function(error){
            fs.writeFile(`data/${title}`, description, 'utf8', function(err){
              response.writeHead(302, {Location: `/?id=${title}`});
              response.end();
            })
          });
      });
    } else {
      response.writeHead(404);
      response.end('Not found');
    }
});
app.listen(3000);

```

### <37.App-ê¸€ì‚­ì œ(ì‚­ì œë²„íŠ¼ êµ¬í˜„)>

```jsx
var http = require('http');
var fs = require('fs');
var url = require('url');
var qs = require('querystring');
 
function templateHTML(title, list, body, control){
  return `
  <!doctype html>
  <html>
  <head>
    <title>WEB1 - ${title}</title>
    <meta charset="utf-8">
  </head>
  <body>
    <h1><a href="/">WEB</a></h1>
    ${list}
    ${control}
    ${body}
  </body>
  </html>
  `;
}
function templateList(filelist){
  var list = '<ul>';
  var i = 0;
  while(i < filelist.length){
    list = list + `<li><a href="/?id=${filelist[i]}">${filelist[i]}</a></li>`;
    i = i + 1;
  }
  list = list+'</ul>';
  return list;
}
 
var app = http.createServer(function(request,response){
    var _url = request.url;
    var queryData = url.parse(_url, true).query;
    var pathname = url.parse(_url, true).pathname;
    if(pathname === '/'){
      if(queryData.id === undefined){
        fs.readdir('./data', function(error, filelist){
          var title = 'Welcome';
          var description = 'Hello, Node.js';
          var list = templateList(filelist);
          var template = templateHTML(title, list,
            `<h2>${title}</h2>${description}`,
            `<a href="/create">create</a>`
          );
          response.writeHead(200);
          response.end(template);
        });
      } else {
        fs.readdir('./data', function(error, filelist){
          fs.readFile(`data/${queryData.id}`, 'utf8', function(err, description){
            var title = queryData.id;
            var list = templateList(filelist);
            var template = templateHTML(title, list,
              `<h2>${title}</h2>${description}`,
              ` <a href="/create">create</a>
                <a href="/update?id=${title}">update</a>
                <form action="delete_process" method="post">
                  <input type="hidden" name="id" value="${title}">
                  <input type="submit" value="delete">
                </form>`
            );
            response.writeHead(200);
            response.end(template);
          });
        });
      }
    } else if(pathname === '/create'){
      fs.readdir('./data', function(error, filelist){
        var title = 'WEB - create';
        var list = templateList(filelist);
        var template = templateHTML(title, list, `
          <form action="/create_process" method="post">
            <p><input type="text" name="title" placeholder="title"></p>
            <p>
              <textarea name="description" placeholder="description"></textarea>
            </p>
            <p>
              <input type="submit">
            </p>
          </form>
        `, '');
        response.writeHead(200);
        response.end(template);
      });
    } else if(pathname === '/create_process'){
      var body = '';
      request.on('data', function(data){
          body = body + data;
      });
      request.on('end', function(){
          var post = qs.parse(body);
          var title = post.title;
          var description = post.description;
          fs.writeFile(`data/${title}`, description, 'utf8', function(err){
            response.writeHead(302, {Location: `/?id=${title}`});
            response.end();
          })
      });
    } else if(pathname === '/update'){
      fs.readdir('./data', function(error, filelist){
        fs.readFile(`data/${queryData.id}`, 'utf8', function(err, description){
          var title = queryData.id;
          var list = templateList(filelist);
          var template = templateHTML(title, list,
            `
            <form action="/update_process" method="post">
              <input type="hidden" name="id" value="${title}">
              <p><input type="text" name="title" placeholder="title" value="${title}"></p>
              <p>
                <textarea name="description" placeholder="description">${description}</textarea>
              </p>
              <p>
                <input type="submit">
              </p>
            </form>
            `,
            `<a href="/create">create</a> <a href="/update?id=${title}">update</a>`
          );
          response.writeHead(200);
          response.end(template);
        });
      });
    } else if(pathname === '/update_process'){
      var body = '';
      request.on('data', function(data){
          body = body + data;
      });
      request.on('end', function(){
          var post = qs.parse(body);
          var id = post.id;
          var title = post.title;
          var description = post.description;
          fs.rename(`data/${id}`, `data/${title}`, function(error){
            fs.writeFile(`data/${title}`, description, 'utf8', function(err){
              response.writeHead(302, {Location: `/?id=${title}`});
              response.end();
            })
          });
      });
    } else if(pathname === '/delete_process'){
      var body = '';
      request.on('data', function(data){
          body = body + data;
      });
      request.on('end', function(){
          var post = qs.parse(body);
          var id = post.id;
          fs.unlink(`data/${id}`, function(error){
            response.writeHead(302, {Location: `/`});
            response.end();
          })
      });
    } else {
      response.writeHead(404);
      response.end('Not found');
    }
});
app.listen(3000);
```

### <38. App- ê¸€ì‚­ì œê¸°ëŠ¥ì™„ì„±>

```jsx
var http = require('http');
var fs = require('fs');
var url = require('url');
var qs = require('querystring');

function templateHTML(title, list, body, control){
  return `
  <!doctype html>
  <html>
  <head>
    <title>WEB1 - ${title}</title>
    <meta charset="utf-8">
  </head>
  <body>
    <h1><a href="/">WEB</a></h1>
    ${list}
    ${control}
    ${body}
  </body>
  </html>
  `;
}
function templateList(filelist){
  var list = '<ul>';
  var i = 0;
  while(i < filelist.length){
    list = list + `<li><a href="/?id=${filelist[i]}">${filelist[i]}</a></li>`;
    i = i + 1;
  }
  list = list+'</ul>';
  return list;
}

var app = http.createServer(function(request,response){
    var _url = request.url;
    var queryData = url.parse(_url, true).query;
    var pathname = url.parse(_url, true).pathname;
    if(pathname === '/'){
      if(queryData.id === undefined){
        fs.readdir('./data', function(error, filelist){
          var title = 'Welcome';
          var description = 'Hello, Node.js';
          var list = templateList(filelist);
          var template = templateHTML(title, list,
            `<h2>${title}</h2>${description}`,
            `<a href="/create">create</a>`
          );
          response.writeHead(200);
          response.end(template);
        });
      } else {
        fs.readdir('./data', function(error, filelist){
          fs.readFile(`data/${queryData.id}`, 'utf8', function(err, description){
            var title = queryData.id;
            var list = templateList(filelist);
            var template = templateHTML(title, list,
              `<h2>${title}</h2>${description}`,
              ` <a href="/create">create</a>
                <a href="/update?id=${title}">update</a>
                <form action="delete_process" method="post">
                  <input type="hidden" name="id" value="${title}">
                  <input type="submit" value="delete">
                </form>`
            );
            response.writeHead(200);
            response.end(template);
          });
        });
      }
    } else if(pathname === '/create'){
      fs.readdir('./data', function(error, filelist){
        var title = 'WEB - create';
        var list = templateList(filelist);
        var template = templateHTML(title, list, `
          <form action="/create_process" method="post">
            <p><input type="text" name="title" placeholder="title"></p>
            <p>
              <textarea name="description" placeholder="description"></textarea>
            </p>
            <p>
              <input type="submit">
            </p>
          </form>
        `, '');
        response.writeHead(200);
        response.end(template);
      });
    } else if(pathname === '/create_process'){
      var body = '';
      request.on('data', function(data){
          body = body + data;
      });
      request.on('end', function(){
          var post = qs.parse(body);
          var title = post.title;
          var description = post.description;
          fs.writeFile(`data/${title}`, description, 'utf8', function(err){
            response.writeHead(302, {Location: `/?id=${title}`});
            response.end();
          })
      });
    } else if(pathname === '/update'){
      fs.readdir('./data', function(error, filelist){
        fs.readFile(`data/${queryData.id}`, 'utf8', function(err, description){
          var title = queryData.id;
          var list = templateList(filelist);
          var template = templateHTML(title, list,
            `
            <form action="/update_process" method="post">
              <input type="hidden" name="id" value="${title}">
              <p><input type="text" name="title" placeholder="title" value="${title}"></p>
              <p>
                <textarea name="description" placeholder="description">${description}</textarea>
              </p>
              <p>
                <input type="submit">
              </p>
            </form>
            `,
            `<a href="/create">create</a> <a href="/update?id=${title}">update</a>`
          );
          response.writeHead(200);
          response.end(template);
        });
      });
    } else if(pathname === '/update_process'){
      var body = '';
      request.on('data', function(data){
          body = body + data;
      });
      request.on('end', function(){
          var post = qs.parse(body);
          var id = post.id;
          var title = post.title;
          var description = post.description;
          fs.rename(`data/${id}`, `data/${title}`, function(error){
            fs.writeFile(`data/${title}`, description, 'utf8', function(err){
              response.writeHead(302, {Location: `/?id=${title}`});
              response.end();
            })
          });
      });
    } else if(pathname === '/delete_process'){
      var body = '';
      request.on('data', function(data){
          body = body + data;
      });
      request.on('end', function(){
          var post = qs.parse(body);
          var id = post.id;
          fs.unlink(`data/${id}`, function(error){
            response.writeHead(302, {Location: `/`});
            response.end();
          })
      });
    } else {
      response.writeHead(404);
      response.end('Not found');
    }
});
app.listen(3000);

```
